include $(GNUSTEP_MAKEFILES)/common.make

AGGREGATE_NAME = @PROJECT_NAME@
APP_NAME = @PROJECT_NAME@
PACKAGE_NAME = @PROJECT_NAME@
VERSION = @PACKAGE_VERSION@
SUBPROJECTS = Triva \
  GraphConfiguration \
  GraphView \
  Dot \
  LinkView \
  SquarifiedTreemap \
  TimeInterval \
  TimeSliceAggregation

@PROJECT_NAME@_OBJC_FILES = \
	TrivaApp.m \
	TrivaCommand.m \
	TrivaPajeComponent.m

ifeq ($(FOUNDATION_LIB), apple)
LDFLAGS += -F./Triva -framework @PROJECT_NAME@
else
LDFLAGS += -L./Triva/@PROJECT_NAME@.framework -l@PROJECT_NAME@
endif
	
@PROJECT_NAME@_INCLUDE_DIRS += @CPPFLAGS@
@PROJECT_NAME@_LIB_DIRS += @LIBS@
@PROJECT_NAME@_LDFLAGS += -lGeneral

include $(GNUSTEP_MAKEFILES)/aggregate.make
include $(GNUSTEP_MAKEFILES)/application.make

deb:
	sudo checkinstall --pkgname @PROJECT_NAME@ -d 2 -si \
		-t debian \
		--arch @ARCHITECTURE@ \
		--maintainer "Lucas.Schnorr@imag.fr" \
		--pkglicense "LGPL" \
		--pkgversion "@PACKAGE_VERSION@" \
		--requires "libgnustep-gui0.16,libgnustep-base1.19,\
			gnustep-back0.16,libmatheval1,libgraphviz4,paje" \
		./checkinstall-make

